<!DOCTYPE html>

<html lang="en" ng-app>

<head>
	
	<title>ISC DHCP Configurator</title>
	
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" media="all">
	<link href="stylesheet.css" rel="stylesheet" media="all">
	
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
	<script src="manager.js"></script>
	
</head>

<body ng-controller="ManagerController">
	
<div class="navbar">
	<div class="navbar-inner">
		<a class="brand" href="#">DHCP Configurator</a>
		<ul class="nav"></ul>
	</div>
</div>

<div class="content">
	
<fieldset>
	
	<legend>
		<span class="float-right"><button type="button" class="btn btn-primary btn-small" ng-click="openNewFileModal()">Create new file</button></span>
		Configuration files
	</legend>
	
	<table class="table table-striped" ng-show="showFileList">

		<thead>
			<tr>
				<th>Label</th>
				<th>Last updated</th>
				<th class="text-center">Actions</th>
			</tr>
		</thead>
		
		<tbody>
			<tr ng-repeat="file in fileList">
				<td>{{file.label}}</td>
				<td>{{file.updated*1000|date:'medium'}}</td>
				<td class="text-center">
					<button class="btn btn-mini" ng-click="loadFile($index)">Load</button>
					<button class="btn btn-mini btn-danger" ng-click="deleteFile($index)">Delete</button>
				</td>
			</tr>
		</tbody>

	</table>
	
	<div class="modal hide" id="newFileModal">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			<h4>Create new configuration file</h4>
		</div>
		<div class="modal-body">
			<div class="control-group {{newFileLabel.validation}}">
				<div class="controls">
					<label for="newFileLabel">Label for new file</label>
					<input type="text" id="newFileLabel" ng-model="newFileLabel.text" data-toggle="popover" data-content="Please specify a label for the new file" data-placement="right" data-trigger="manual">
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<a href="#" class="btn" data-dismiss="modal">Close</a>
			<a href="#" class="btn btn-primary" ng-click="createNewFile()">Create file</a>
		</div>
	</div>

</fieldset>
	
<fieldset>
	
	<legend>{{loadedFile.text}}</legend>
	
	<div class="editor" ng-show="showEditor">
	
		<h4>
			<span class="float-right"><button type="button" class="btn btn-small" ng-click="newParameter()">Add new</button></span>
			Parameters
		</h4>

		<table class="table table-striped">

			<thead>
				<tr>
					<th>Parameter</th>
					<th>Value</th>
					<th class="text-center">Actions</th>
				</tr>
			</thead>

			<tbody>
				<tr ng-repeat="parameter in parameters">
					<td>{{parameter.param_key}}</td>
					<td>{{parameter.param_val}}</td>
					<td class="text-center">
						<button class="btn btn-mini btn-danger" ng-click="deleteParameter($index)">Delete</button>
					</td>
				</tr>
			</tbody>

		</table>
		
		<h4>
			<span class="float-right"><button type="button" class="btn btn-small" ng-click="newReservation()">Add new</button></span>
			Reservations
		</h4>
		
		<table class="table table-striped">

			<thead>
				<tr>
					<th>Label</th>
					<th>MAC address</th>
					<th>Reserved IP</th>
					<th class="text-center">Actions</th>
				</tr>
			</thead>

			<tbody>
				<tr ng-repeat="reservation in reservations">
					<td>{{reservation.label}}</td>
					<td>{{reservation.mac_address}}</td>
					<td>{{reservation.ip_address}}</td>
					<td class="text-center">
						<button class="btn btn-mini btn-danger" ng-click="deleteReservation($index)">Delete</button>
					</td>
				</tr>
			</tbody>

		</table>
	
	</div>
	
</fieldset>

</div>
	
</body>

</html>
